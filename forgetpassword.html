<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≠‡•Ç‡§≤ ‡§ó‡§è</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #d9a7c7, #fffcdc);
      padding: 40px 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .box {
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      padding: 30px 25px;
      width: 100%;
      max-width: 400px;
      text-align: center;
    }
    h2 {
      color: #333;
      margin-bottom: 20px;
      text-shadow: 1px 1px 1px #ccc;
    }
    input, button {
      width: 100%;
      padding: 12px 15px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
    }
    input:focus {
      border-color: #007bff;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    #status {
      margin-top: 15px;
      font-weight: bold;
    }
    .hidden {
      display: none;
    }
    .visible {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>

  <div class="box">
    <h2>üîê ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≠‡•Ç‡§≤ ‡§ó‡§è?</h2>

    <input type="text" id="userInput" placeholder="üì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞">

    <button onclick="sendOTP()">OTP ‡§≠‡•á‡§ú‡•á‡§Ç</button>

    <div id="otpSection" class="hidden">
      <input type="text" id="otpInput" placeholder="üîë 4 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ OTP">
      <button onclick="verifyOTP()">OTP ‡§µ‡•á‡§∞‡•Ä‡§´‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <div id="newPassSection" class="hidden">
      <input type="password" id="newPassword" placeholder="üîí ‡§®‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤‡•á‡§Ç">
      <button onclick="resetPassword()">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∞‡§ø‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <p id="status"></p>
  </div>

  <script>
    let generatedOTP = "";

    function sendOTP() {
      const mobile = document.getElementById("userInput").value.trim();
      if (mobile === "") {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç");
        return;
      }

      fetch('send_otp.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'mobile=' + encodeURIComponent(mobile)
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          generatedOTP = data.otp; // only for demo/test ‚Äì remove in production
          document.getElementById("otpSection").className = "visible";
          document.getElementById("status").innerText = "‚úÖ OTP ‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à (‡§°‡•á‡§Æ‡•ã: " + generatedOTP + ")";
        } else {
          document.getElementById("status").innerText = "‚ùå OTP ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: " + data.message;
        }
      });
    }

    function verifyOTP() {
      const userOTP = document.getElementById("otpInput").value.trim();
      if (userOTP === generatedOTP) {
        document.getElementById("newPassSection").className = "visible";
        document.getElementById("status").innerText = "‚úÖ OTP ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§µ‡•á‡§∞‡•Ä‡§´‡§æ‡§à ‡§π‡•Å‡§Ü!";
      } else {
        document.getElementById("status").innerText = "‚ùå ‡§ó‡§≤‡§§ OTP!";
      }
    }

    function resetPassword() {
      const newPass = document.getElementById("newPassword").value.trim();
      if (newPass.length < 4) {
        alert("‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 4 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è");
        return;
      }
      document.getElementById("status").innerText = "‚úÖ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§¶‡§≤ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!";
    }
  </script>

</body>
</html>
